




-----------------------------------------------------------
rsyslogd Log rotation
	Old log file will be removed from the system. To keep them, you can either back up the log file, or use a centralized log server to keep it for a significantly longer period


	/etc/logrotate.conf 	rotate weekly, keep 4 weeks => log file in the last 4 week are kept, rotated weekly
-----------------------------------------------------------    
Use journald
	journald stores log msg in the a temporary binary file, /run/log/journal. use journalctl command to read it

	Because it works with systemd, it logs everything happening on the server but the log is not persistent between reboots. To keep them, you can forward the msg from journald to rsyslogd. rsyslogd will keep it in /var/log.

	journalctl		show the log msg since your server starts. It uses less pager. You'll see the beginning of the journal.
	journalctl -f   you'll see the end of the journal
	journalctl	type G	move to the end of the journal as well

	Get familiar with the filtering options of journalctl from Execercise 13-3

	journalctl --no-pager	no pager, dump all the info
	journalctl -f 			real time monitoring
	journalctl _UID=100		show msg logged for user with uid 100
	journalctl -n 20		display the last 20 lines
	journalctl -p err		display err only
	journalctl --since --until 		display log in this time period
	journalctl -o verbose 			a lot of options are shown here. Maybe options from systemd, example: who triggers it, which user, which process, what type of log, what command triggers it etc.

-----------------------------------------------------------
Preserve the systemd journal
	logs from journal are at /run/log/journal
	Forward to rsyslogd, it writes to /var/log/journal

	to perserve the journal:

	1. make sure directory /var/log/journal exists

	2. update the parameters in /etc/systemd/journal.conf
		Storage=auto			preserved
		Storage=persistent		preserved, create /var/log/journal if it doesn't exist
		Storage=non				not preserved, no data is not stored, not even in /run/log/journal, but it's still forwarding to targets such as kernel log buffer or syslog
		Storage=volatile 		not preserved, data is only stored in /run/log/journal
        
-----------------------------------------------------------
Journal log rotation
	built-in rotation, rotate monthly.
	size limit, it will stop growing if it reaches 10% of the size of file system, if less than 15% of the file system are free. Old msg are dropped automatically.

	To change the rotation setting, config it in /etc/systemd/journald.conf

	Exercise 13-4 perserve the journal

