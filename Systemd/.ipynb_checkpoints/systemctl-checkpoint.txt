

# show active service unites

$ systemctl --type=service
UNIT                               LOAD   ACTIVE SUB     DESCRIPTION                                                                  
accounts-daemon.service            loaded active running Accounts Service                                                             
alsa-state.service                 loaded active running Manage Sound Card State (restore and store)                                  
atd.service                        loaded active running Job spooling tools                                                           
auditd.service                     loaded active running Security Auditing Service                                                    
avahi-daemon.service               loaded active running Avahi mDNS/DNS-SD Stack                                                      
bluetooth.service                  loaded active running Bluetooth service                                                            
chronyd.service                    loaded active running NTP client/server                                                            


# same as previous command

$ systemctl list-units --type=service

# show inactive and active service units

$ systemctl list-units --type=service --all

# show all services that have failed

$ systemctl --failed --type=service
0 loaded units listed. Pass --all to see loaded but inactive units, too.
To show all installed unit files use 'systemctl list-unit-files'.

# show detailed status info about your.service

$ systemctl status -l httpd.service
● httpd.service - The Apache HTTP Server
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; enabled; vendor preset: disabled)
  Drop-In: /usr/lib/systemd/system/httpd.service.d
           └─php-fpm.conf
   Active: active (running) since Sat 2021-02-13 18:02:59 MST; 5 days ago
     Docs: man:httpd.service(8)
 Main PID: 1268 (httpd)
   Status: "Running, listening on: port 443, port 80"
    Tasks: 213 (limit: 11073)
   Memory: 11.4M
   CGroup: /system.slice/httpd.service
           ├─1268 /usr/sbin/httpd -DFOREGROUND
           ├─1396 /usr/sbin/httpd -DFOREGROUND
           ├─1399 /usr/sbin/httpd -DFOREGROUND
           ├─1403 /usr/sbin/httpd -DFOREGROUND
           └─1437 /usr/sbin/httpd -DFOREGROUND

Feb 13 18:02:54 localhost.localdomain systemd[1]: Starting The Apache HTTP Server...
Feb 13 18:02:59 localhost.localdomain httpd[1268]: AH00558: httpd: Could not reliably determine the server's fully qualified domain name, usi>
Feb 13 18:02:59 localhost.localdomain systemd[1]: Started The Apache HTTP Server.
Feb 13 18:02:59 localhost.localdomain httpd[1268]: Server configured, listening on: port 443, port 80

----------------------------------------------------------------------------
Manage Dependencies
	Unit types such as socket and path are directly related to a service unit. access them will automatically trigger service unit.

	Dependencies can be defined by keyword: Required, Requisit, Wants, After, Before.

	systemctl list-dependencies vsftpd					find out which dependencies this unit has
	systemctl list-dependencies --reverse vsftpd 		find out which units are dependents of this unit

	Required: "a requires b" means 1. to load a, b must be loaded. 2. if b is deactivated, so will be a
	Requisite: "a's requisite is b" means if b is not loaded, a will fail
	Wants: "a wants b" means just that, but when b is not loaded, a will not fail.
	Before: a start before b
	After: a start after b
    
----------------------------------------------------------------------------
Manage unit options

	systemctl show sshd 		show all systemd options that can be configured in sshd.service unit
	
	when change option, you need to write to /etc/systemd/system

	To do this, you can either:

	1. use systemctl edit httpd.service to change the default configuration

		it will create a file and directroy: /etc/systemd/system/sshd.service.d/override.conf
		This file will overwrite the default config in /usr/lib/systemd/system

		workflow:
			yum install httpd
			systemctl cat httpd.service		show current config of unit file
			systemctl show httpd.service	show available config of unit file
			systemctl edit httpd.service	write to /etc/systemd/system/httpd.service.d/override.conf, this file is appended to the default config
			systemctl cat httpd.service 	you see default config + custom config, where custom overwrites the default config
			systemctl daemon-reload			reload systemd to pick up the new configuration(reload: process the unit files) 
			systemctl restart httpd			restart the service
			systemctl status httpd			verify it's active	
	or:
	2. copy /usr/lib/systemd/system to /etc/systemd/system/, then make change